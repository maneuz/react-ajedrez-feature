{"ast":null,"code":"import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = function () {\n  function Observable(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var _this = this;\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function () {\n      var _a = _this,\n        operator = _a.operator,\n        source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscriber = new SafeSubscriber({\n        next: function (value) {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n      _this.subscribe(subscriber);\n    });\n  };\n  Observable.prototype._subscribe = function (subscriber) {\n    var _a;\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n  Observable.prototype.pipe = function () {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n  return Observable;\n}();\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}","map":{"version":3,"mappings":"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","names":["SafeSubscriber","Subscriber","isSubscription","observable","Symbol_observable","pipeFromArray","config","isFunction","errorContext","subscribe","_subscribe","Observable","operator","source","observerOrNext","error","complete","subscriber","isSubscriber","_this","add","call","_trySubscribe","sink","err","next","promiseCtor","getPromiseCtor","resolve","reject","value","unsubscribe","_i","operations","x","Promise","isObserver"],"sourceRoot":"","sources":["../../../src/internal/Observable.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}