{"ast":null,"code":"import { __read, __spreadArray } from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { Observable } from '../Observable';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { observeOn } from '../operators/observeOn';\nimport { AsyncSubject } from '../AsyncSubject';\nexport function bindCallbackInternals(isNodeStyle, callbackFunc, resultSelector, scheduler) {\n  if (resultSelector) {\n    if (isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return bindCallbackInternals(isNodeStyle, callbackFunc, scheduler).apply(this, args).pipe(mapOneOrManyArgs(resultSelector));\n      };\n    }\n  }\n  if (scheduler) {\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return bindCallbackInternals(isNodeStyle, callbackFunc).apply(this, args).pipe(subscribeOn(scheduler), observeOn(scheduler));\n    };\n  }\n  return function () {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var subject = new AsyncSubject();\n    var uninitialized = true;\n    return new Observable(function (subscriber) {\n      var subs = subject.subscribe(subscriber);\n      if (uninitialized) {\n        uninitialized = false;\n        var isAsync_1 = false;\n        var isComplete_1 = false;\n        callbackFunc.apply(_this, __spreadArray(__spreadArray([], __read(args)), [function () {\n          var results = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            results[_i] = arguments[_i];\n          }\n          if (isNodeStyle) {\n            var err = results.shift();\n            if (err != null) {\n              subject.error(err);\n              return;\n            }\n          }\n          subject.next(1 < results.length ? results : results[0]);\n          isComplete_1 = true;\n          if (isAsync_1) {\n            subject.complete();\n          }\n        }]));\n        if (isComplete_1) {\n          subject.complete();\n        }\n        isAsync_1 = true;\n      }\n      return subs;\n    });\n  };\n}","map":{"version":3,"mappings":";AACA,SAASA,WAAW,QAAQ,qBAAqB;AACjD,SAASC,UAAU,QAAQ,eAAe;AAC1C,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,gBAAgB,QAAQ,0BAA0B;AAC3D,SAASC,SAAS,QAAQ,wBAAwB;AAClD,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,OAAM,SAAUC,qBAAqB,CACnCC,WAAoB,EACpBC,YAAiB,EACjBC,cAAoB,EACpBC,SAAyB;EAEzB,IAAID,cAAc,EAAE;IAClB,IAAIT,WAAW,CAACS,cAAc,CAAC,EAAE;MAC/BC,SAAS,GAAGD,cAAc;KAC3B,MAAM;MAEL,OAAO;QAAqB;aAAA,UAAc,EAAdE,qBAAc,EAAdA,IAAc;UAAdC;;QAC1B,OAAQN,qBAAqB,CAACC,WAAW,EAAEC,YAAY,EAAEE,SAAS,CAAS,CACxEG,KAAK,CAAC,IAAI,EAAED,IAAI,CAAC,CACjBE,IAAI,CAACX,gBAAgB,CAACM,cAAqB,CAAC,CAAC;MAClD,CAAC;;;EAML,IAAIC,SAAS,EAAE;IACb,OAAO;MAAqB;WAAA,UAAc,EAAdC,qBAAc,EAAdA,IAAc;QAAdC;;MAC1B,OAAQN,qBAAqB,CAACC,WAAW,EAAEC,YAAY,CAAS,CAC7DK,KAAK,CAAC,IAAI,EAAED,IAAI,CAAC,CACjBE,IAAI,CAACZ,WAAW,CAACQ,SAAU,CAAC,EAAEN,SAAS,CAACM,SAAU,CAAC,CAAC;IACzD,CAAC;;EAGH,OAAO;IAAA;IAAqB;SAAA,UAAc,EAAdC,qBAAc,EAAdA,IAAc;MAAdC;;IAG1B,IAAMG,OAAO,GAAG,IAAIV,YAAY,EAAO;IAGvC,IAAIW,aAAa,GAAG,IAAI;IACxB,OAAO,IAAIf,UAAU,CAAC,UAACgB,UAAU;MAE/B,IAAMC,IAAI,GAAGH,OAAO,CAACI,SAAS,CAACF,UAAU,CAAC;MAE1C,IAAID,aAAa,EAAE;QACjBA,aAAa,GAAG,KAAK;QAMrB,IAAII,SAAO,GAAG,KAAK;QAGnB,IAAIC,YAAU,GAAG,KAAK;QAKtBb,YAAY,CAACK,KAAK,CAEhBS,KAAI,yCAGCV,IAAI,KAEP;UAAC;eAAA,UAAiB,EAAjBD,qBAAiB,EAAjBA,IAAiB;YAAjBY;;UACC,IAAIhB,WAAW,EAAE;YAIf,IAAMiB,GAAG,GAAGD,OAAO,CAACE,KAAK,EAAE;YAC3B,IAAID,GAAG,IAAI,IAAI,EAAE;cACfT,OAAO,CAACW,KAAK,CAACF,GAAG,CAAC;cAGlB;;;UAOJT,OAAO,CAACY,IAAI,CAAC,CAAC,GAAGJ,OAAO,CAACK,MAAM,GAAGL,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC,CAAC;UAGvDF,YAAU,GAAG,IAAI;UAMjB,IAAID,SAAO,EAAE;YACXL,OAAO,CAACc,QAAQ,EAAE;;QAEtB,CAAC,GAEJ;QAID,IAAIR,YAAU,EAAE;UACdN,OAAO,CAACc,QAAQ,EAAE;;QAKpBT,SAAO,GAAG,IAAI;;MAIhB,OAAOF,IAAI;IACb,CAAC,CAAC;EACJ,CAAC;AACH","names":["isScheduler","Observable","subscribeOn","mapOneOrManyArgs","observeOn","AsyncSubject","bindCallbackInternals","isNodeStyle","callbackFunc","resultSelector","scheduler","_i","args","apply","pipe","subject","uninitialized","subscriber","subs","subscribe","isAsync_1","isComplete_1","_this","results","err","shift","error","next","length","complete"],"sourceRoot":"","sources":["../../../../src/internal/observable/bindCallbackInternals.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}